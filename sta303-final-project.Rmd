---
title: "Report title"
subtitle: "Subtitle that indicates findings"
author: "Report prepared for MINGAR by MANGO"
date: 2022-04-07
lang: "en"
output:
  pdf_document:
    template: report.tex
    toc: true
    toc_depth: 2
    
titlepage: true
titlepage-color: "F4BB44"
titlepage-text-color: "000000"
titlepage-rule-color: "000000"
titlepage-rule-height: 2
---

```{r, message = FALSE, echo=FALSE, warning=FALSE}
library(tidyverse)
library(lme4)
library(rvest)
library(polite)
library(lmtest)
library(wesanderson)
library(ggplot2)
library(gplots)
library(ggmap)
library(maps)
library(mapdata)
library(leaflet)
library(plotly)
library(RColorBrewer)
library(ggpubr)
library(tibble)

# this should suppress all code and messages
knitr::opts_chunk$set(include=FALSE)
```

# General comments (you can delete this section)

*Before making any changes, knit this Rmd to PDF and change the name of the PDf to something like 'original-instructions.pdf', or whatever you like (it is just for your reference).. Then you can delete this section and if you want to check what it said, just open the other PDF. You don't HAVE to use this particular template, but you DO need to write you report in RMarkdown and include a cover page.*

*The cover page must be a single stand alone page and have:*

-   *A title and subtitle (that indicate your findings)*
-   *"Report prepared for MINGAR by" your company name*
-   *Date (assessment submission date is fine)*

*You can change the colour of this cover to any colour you would like by replacing 6C3082 in the YAML above (`titlepage-color:`) to another hex code. You could use this tool to help you:* <https://htmlcolorcodes.com/color-picker/>

*Note: There should NOT be a table of contents on the cover page. It should look like a cover.*

\newpage

## Background and aim 
MANGO was hired to generate insights for MINGAR’s marketing and product considerations. The purposes of this report are threefold: (1) to identify demographic characteristics of buyers of MINGAR’s two newer, more affordable lines of fitness tracking wearables, “Active” and “Advance”; (2) to investigate potential performance issues with sleep scores in darker skin users; and (3) to understand product features that drive sales.

The rest of this summary presents key findings and highlights limitations. 

## Key findings

- Customers of the new affordable “Active” and “Advance” lines are most populated in Ontario, followed by Alberta and Quebec (Table 1).

- The new “Active” and “Advance” product lines sell most in lower-income neighborhoods, meeting marketing goals.

- Female customers make up the majority of the customer case across all product lines (Table 1).

- Customers with darker skin emoji-modifiers have a larger mean number of flags during a sleep session when compared to those with lighter skin emoji-modifiers (Figure1).

- Despite recent launches, lower price points, and less features, the combined sales of “Active” and “Advance” top all other product lines. 

## Limitations

- Emoji-modifiers were used to predict customer skin tone, therefore limiting the ability to make generalizations on the basis of race and ethnicity.

- Due to the lack of data, customer income was made equivalent to the median household income based on postal code, therefore may not be reflective of an individual customer's true income level.

\newpage
```{r include=TRUE, echo=FALSE}
t<- tribble(~"",~"Old Line", ~"New Line",
  "Location", "Ontario, followed by Quebec, Alberta and British Columbia", "Ontario, followed by Alberta, Quebec and British Columbia",
  "Gender", " 58.6% female", " 57.8% female",
  "Mean Income", "73166.18" ,"68815.47", 
)

knitr::kable(t, caption = "Demographics of customers in old and new line")
```

\newpage

# Technical report

## Introduction

Since the early 2000s, MINGAR has been growing its business in the fitness tracker space. Recently, MINGAR has expanded its business to launch two new lines of products, “Active” and “Advance”, both set at a more approachable price point than the traditional high-end product lines. In addition to helping MINGAR understand its new customer base and potential issues around product features better, we conduct data-driven customer and product analyses with goals to inform marketing strategies, help MINGAR stay competitive in the fitness tracker space, and expand its market share in the Canadian market.

Our review and assessments involve internal data on customer demographics provided by MINGAR, as well as external data, including Census Canada postal code conversion file (PCCF) of 2021, household median income data acquired from the 2016 Canadian census, and industry standard device and feature data acquired from the Fitness Tracker Info Hub. 

In the following sections, the aforementioned datasets will be used to answer three research questions, with each detailing data manipulation, statistical methods, and conclusions. A summary of findings across the three questions will be presented in the Discussion section, along with the strengths and limitations of the analysis. 

### Research questions

-   How do the demographic for the traditional lines compare with that of the "Active and "Advance" lines?

-   How do skin tone emoji modifiers affect performance accuracy of wearable devices?

-   What are the main differences between different lines of the device?

## Q1: What are the demographic characteristics of MINGAR customers across different product lines?

### Location of customers

To create the plot that demonstrate the location of users in different production line, we combined the user dataset with web script Census Canada Postal Code Conversion dataset by postcode. We can therefore generate the province that the user belongs to by extracting the first two digit of CSDuid (Census subdivision unique identifier) from the Census dataset.

In Figure 1, the size of the bubble is proportional to percentage of customers in each province in that line and the position of each bubble represents the latitude and longtitude of that province. From the plot, we can notice that Ontario has the most users in all four lines. In Active line and Advance line, The users in Quebec is slightly less than ones in Ontario, but in Run line, the number of users in Alberta exceeds the number of users in Quebec. From the result, we are able to see where the target customers is located for product in different lines.

```{r}
device_cust <-read.csv("./data/device_cust.csv")
```

```{r, message = FALSE}
province <- c(10, 11, 12, 13, 24, 35, 46, 47, 48, 59, 60, 61, 62)
province_name <- c("Newfoundland and Labrador", "Prince Edward Island","Nova Scotia", "New Brunswick", "Quebec", "Ontario", "Manitoba", "Saskatchewan", "Alberta", "British Columbia", "Yukon", "Northwest Territories", "Nunavut")
latitude <- c(53.5, 46, 45, 46.498390, 53, 50, 56.415211, 55, 55, 53.726669, 64, 62.135189, 70.453262)
longtitude <- c(-60, -63, -63, -66.159668, -70, -85,-98.739075, -106, -115, -127.647621, -135, -122.792473, -86.798981)
canada_pro<- data.frame(province = province, province_name = province_name, latitude=latitude,longtitude= longtitude)

device_cust$province <- substr(device_cust$CSDuid,1,2)
device_cust <- merge(device_cust, canada_pro, by="province")
province_data <- device_cust %>% group_by(province, line) %>% summarise(num = n(), province_name, latitude, longtitude) %>% unique()

province_data_active <- province_data[province_data$line == "Active",]

province_data_advance <- province_data[province_data$line == "Advance",]
province_data_run <- province_data[province_data$line == "Run",]
province_data_idol <- province_data[province_data$line == "iDOL",]
```

```{r include=F}
# province_data %>% 
#   plot_ly(x=~longtitude, y=~latitude, type="scatter", mode = "hover", color= ~province_name, size=~num, sizes = c(20, 200),  #marker=list(sizemode="diameter", opacity=0.5)) %>% layout(title="Active")
# 
# province_data_advance %>%
#   plot_ly(x=~longtitude, y=~latitude, type="scatter", mode = "hover", color= ~province_name, size=~num, sizes = c(20, 200),  marker=list(sizemode="diameter", opacity=0.5)) %>% layout(title="Advance")
# 
# province_data_run %>% 
#   plot_ly(x=~longtitude, y=~latitude, type="scatter", mode = "hover", color= ~province_name, size=~num, sizes = c(20, 200),  marker=list(sizemode="diameter", opacity=0.5))%>% layout(title="Run")
# 
# province_data_idol %>%
#   plot_ly(x=~longtitude, y=~latitude, type="scatter", mode = "hover", color= ~province_name, size=~num, sizes = c(20, 200),  marker=list(sizemode="diameter", opacity=0.5))%>% layout(title="iDOL")

```

![Customer location by device line](./data/province_line.png)

### Age of customers

```{r fig.cap="Age of customer by device line", include=T, echo=F, fig.height=3}

device_cust %>% ggplot(aes(x = age, fill=line)) + geom_histogram(bins = 30) +  facet_wrap("line") + theme_minimal() + scale_fill_manual(values = wes_palette("Moonrise3"))+ theme(legend.position="none")
```

To get a sense of how the age of customers is distributed in different lines, we created a histogram plot of the Age of customer by device line. In the plot above, we can see that Advance, Run and iDOL line have a similar distribution that is slightly right-skewed and there is a bimodal distribution in Active line. We deside to use Kruskal Wallis test since the response do not have a normal distribution and there are more than two categories for the independent variable, `line`.

#### Assumption Checking

-   It satisfies the assumptions that there are two or more levels in the independent variable `line`, the dependent variable,`age`, is on a ratio scale and the observations are independent.

-   The fourth assumption is that all groups should have same shape distributions. In our case, three of the groups have same shape distribution, while Active line have a bimodal distribution, which may be caused by the lack of data. It is a limitation in the model assumption checking process.

#### Kruskal Wallis Test

After running the Kruskal Wallis Test, we get a p-value of $5.206^{-13}$. It is smaller than the significant level of 0.05, thus we can conclude that the customers in the four lines do not have the same median age.

```{r}
kruskal.test(age ~ line, data = device_cust)
```

### Gender of customers

To test whether the customers gender in new and traditional lines are different. We created a new variable `line_binary` which have a value `new` for active and advance line, and `old` for other lines.From the bar plot below, we can notice that there are more female customers in both new line and old lines. Since there are more females in either case, we created a new variable `sex_binary` which have a value 1 for female and 0 for other genders, in order to do the two sample t-test.

```{r fig.cap="Sex of customer by device line", include=T, echo=F, fig.height=2}
device_cust$line_binary <- ifelse(device_cust$line %in% c("Advance", "Active"), "new", "old")
device_cust %>% ggplot(aes(x = sex, fill=line_binary)) + geom_bar() +  facet_wrap("line_binary") + theme_minimal() + scale_fill_manual(values = wes_palette("Moonrise3"))+ theme(legend.position="none")
```

#### Two Sample t-test

We conducted a two sample t-test on it. The mean in group `new` and group `old` is 0.578 and 0.586 respectively. Which indicates that there are approximatly 58% customers that are female in all lines. Since the p-value is 0.2598, we do not reject the hypothesis that the difference in mean gender equal to 0 between two groups of lines. The result indicates that the gender of customers do not very for old and new lines.

```{r}
device_cust$sex_binary <-  ifelse(device_cust$sex == "Female", 1, 0)
t.test(sex_binary~ line_binary, data = device_cust, var.equal = TRUE)
```

### Income of customers

```{r fig.cap="Household income of customer by device line", include=T, echo=F, fig.height=2}
income <-  read.csv("./data/median_income.csv")

group_income <- inner_join(device_cust, income, by = "CSDuid") %>% select(c("line","line_binary", "hhld_median_inc"))
group_income %>% ggplot(aes(x= hhld_median_inc, fill = line_binary)) + geom_histogram(bins = 30) + facet_wrap("line_binary") + theme_minimal() + scale_fill_manual(values = wes_palette("Moonrise3")) + theme(legend.position="none") + labs(x="household income")

```

```{r}
t.test(hhld_median_inc~ line_binary, data = group_income, var.equal = TRUE)
```

#### Two Sample t-test

From the two sample t-test, the mean income in group `new` and group `old` is 68815.47 and 73166.18 respectively with a p-value of $2.2^{-16}$. Thus, we reject the hypothesis that the two groups have the same mean in income and we can see that the customers who buy products from the new line have around 4000 less mean income than those who buy from the old line.

## How does emoji modifier color affect the accuracy of wearable devices?

### Data Manipulation

The dataset "race_sleep_data" is obtained through combining the customer profiles, the sleep tracking, and the device data. The names are cleaned and only variables relating to quality and customer attributes are selected. The newly added variable "skin_tone" divides the users to different skin tone categories depending on their selected emoji modifier.

### Exploratory Plots

```{r}
race_sleep_data <- read.csv("./data/race_sleep_data.csv")
skin_tone_palette <- c("#ffdbac", "#f1c27d", "#e0ac69", "#c68642", "#8d5524")

race_sleep_data <- race_sleep_data %>%
  mutate(skin_tone = fct_relevel(skin_tone, "light", "medium_light", "medium", "medium_dark", "dark"))

race_sleep_data$sex <- ifelse(is.na(race_sleep_data$sex), "Not Answered", race_sleep_data$sex)
```

```{r}
# distribution of number of flags for each race 
race_fig_1 <- race_sleep_data %>% ggplot(aes(x = flags, fill=skin_tone)) + geom_histogram(bins = 30) + scale_fill_manual(values = skin_tone_palette) + facet_wrap("skin_tone") + theme_minimal() + 
  labs(title = "Distribution of Flags for each Emoji Modifier",
       x = "Number of Flags",
       y = "Count") + theme(legend.position="none") + theme(text = element_text(size = 6))


# number of individuals using each line for each race by sex

race_fig_2 <- race_sleep_data %>% ggplot(aes(line, fill = skin_tone)) + facet_wrap("sex") + geom_bar() + scale_fill_manual(values = skin_tone_palette) + theme_minimal() +
  labs(title = "Num of Users using each Line, sort by Sex and Emoji Modifier", 
       x = "Line",
       y = "Number of Users") + theme(legend.position="none") + theme(text = element_text(size = 6))

# number of flags v.s. duration, coloured by skin tone
race_fig_3 <- race_sleep_data %>% ggplot(aes(x = duration, y = flags, colour = skin_tone)) + geom_point()+ scale_colour_manual(values = skin_tone_palette) + theme_minimal() + 
  labs(title = "Sleep Duration v.s. Number of Flags, coloured by Emoji Modifier", 
       x = "Sleep Duration",
       y = "Number of Flags") + theme(legend.position="none") + theme(text = element_text(size = 6))
```

```{r, include = TRUE, echo = FALSE}
ggarrange(race_fig_2, ggarrange(race_fig_1, race_fig_3, labels = c("B", "C"), ncol = 1, nrow = 2), labels = c("A"))
```

Figure A shows that there are more light emoji modifier users than dark emoji modifier users and there are more females than males. Most users use the Advance or Run lines.

Figure B shows that darker emoji modifier users seem to have a larger spread and larger mean of number of flags than compared to lighter emoji modifier users, suggesting some evidence of a performance bias.

Figure C shows that there is not much relationship between duration of sleep and number of flags, indicating that duration may not be an important predictor for the number of flags.

## Fitting a GLMM with Poisson Link Function

### Model Assumption Checks

1.  Independence of Subjects: the independence of subjects assumption is satisfied as we assume that every customer is independent from each other and are randomly selected from the population
2.  Random Effects (each individual) come from a normal distribution
3.  Random Effect errors have constant variance:

```{r, include = TRUE, echo = FALSE, message=FALSE, fig.align='left', fig.width=4, fig.height = 3}
temp_race_sleep_data <- race_sleep_data %>% 
  filter(!(flags == 0)) %>% 
  group_by(cust_id) %>% 
  summarise("var" = var(log(flags)), "skin_tone" = skin_tone)


temp_race_sleep_data <- data.frame(temp_race_sleep_data)

temp_race_sleep_data %>% ggplot(aes(y = var)) + geom_boxplot() + scale_colour_manual(values = skin_tone_palette) + theme_minimal() + 
  labs(title = "Spread of the Variance of Log(# of flags) for each user",
       y = "Var(Log(# of flags))") + theme(legend.position="none") + theme(text = element_text(size = 7))

```

We see that the variance of the number of flags transformed by the link function (log) is mostly the same with little spread across individuals. This suggests that the homoscedasiticy of random effect errors assumption is satisfied.

4.  Poisson link function is appropriate:

From the Figure B above, we see that the number of flags (response variable) ranges from 0 to over 20, is right skewed, and can be modeled by Poisson distribution. We also check if the mean and variance of number of flags is equal for each skin tone:

```{r, include = TRUE, echo=FALSE}
# check mean and variance of number of flags for each skin tone (main effect)
mean_var_check <- race_sleep_data %>% group_by(skin_tone) %>% summarise(mean = mean(flags), var = var(flags), number= n())

mean_var_check <- data.frame(mean_var_check)

knitr::kable(mean_var_check, align = 'c', col.names = c("Emoji Modifier  ","  Mean(# of flags)  ", "  Var(# of flags)  ", "  Number of Observations"))
```

We do observe some evidence of a violation of the mean=variance assumption; however, any violations are modest. Hence, the Poisson model is appropriate in this case.

### Model Fitting

$$\begin{aligned}Y_{irs} &\thicksim Poisson(\lambda_{irs})\\
\log(\lambda_{irs}) &= \beta_0 + X_{irs}\beta + U_{i}\\
U_i &\thicksim N(0, \sigma ^2) 
\end{aligned}$$

-   $Y_{irs}$ is the number of flags for individual $i$ with emoji modifier $r$ and sex $s$
-   $X_{irs}$ has indicator variables for emoji modifier and sex
-   $U_i$ is the individual level random effect

```{r}

# race1<- lme4::glmer(flags ~ skin_tone + (1 | cust_id), 
#         family='poisson', data=race_sleep_data)
#summary(race1)

race2<- lme4::glmer(flags ~ skin_tone + sex + (1 | cust_id), 
        family='poisson', data=race_sleep_data)

```

```{r, cache = TRUE, message=FALSE, include = TRUE, echo = FALSE}
ci <- confint(race2,parm="beta_",method="Wald")
expect_conf <- exp(ci)

expect_conf <- data.frame(expect_conf)

knitr::kable(expect_conf, align = 'c', col.names = c("2.5%", "97.5%"))

```

From the model, we see that the general trend is the darker one's emoji modifier is, the higher the log of the mean number of flags their devices report. For example, compared to the base line of the light emoji modifier, we are 95% confident that, compared to light emoji modifier users, the mean number of flags for a user with the dark emoji modifier changes by a factor of between (9.77, 10.65), which is about ten times more. The p-values for each level of emoji modifier predictors are extremely small, suggesting strong evidence against the fact that the mean number of flags are equal for different types of emoji modifiers. We also observe that there is a (1 - 0.91) x 100% = 9% decrease in the mean number of flags for males compared to females; however, this result may just be due to the relatively fewer data for male users than for female users.

## What are the main differences between different lines of the device?

In this research question, we are interested in the differences of the **performance/price** among the different lines of services, combined with the different demographic of the users between lines, we can give a report summary/advice for what has changed and how the change affects the target audience.

### Data Manipulation

We used three database in this part. The first one is ***device_data***, which is retrieved by web scraping from the fitness tracker info hub. This database includes all the information on the devices produced by the company *Mingar* and *Bitfit.* The second database is ***device_cust*** including the data for individuals who bought the devices from *Mingar.* This database is obtained by merging the database *cust_dev* and *customer*. The third database used in this question is ***data_performance,*** which includes the percentage of the devices having some functionality in each line***.*** This dataset is built by group the *device_data* by line and functionality. More details about the code of data waggling is in the *data_prep.Rmd* file.

### Exploratory plots

```{r}
# Read the dataset from the folder
device_data <- read.csv("./data/device_data.csv")
device_cust <- read.csv("./data/device_cust.csv")
device_performance <- read.csv("./data/device_performance.csv")
```

```{r echo=FALSE, include=TRUE, fig.height=5, fig.width=5}
# All binary performance
library(ggpubr)
ggballoonplot(device_performance, 
              title = "Percentage of devices that have certain Functionalities for each Line",
              x="name", 
              y="line", 
              size = "percentage", 
              fill = "percentage",
              color = "percentage",
              ggtheme = theme_minimal()) +
  scale_fill_viridis_c(option = "E") +
  scale_color_viridis_c(option = "E")
```

The above plot shows the performance of different lines. The size of the circle is the percentage of devices in the line on x-axis that has the functionality on y-axis. Based on the plot, the line *Run* has all of the functionality, while line *Active* and *Advanced* has all except the pulse oximiter. By the size of each circle, the line *Run* has a more diverse functionality than the other two lines. Each device in line *Advanced* almost has the same functionality.

```{r echo=FALSE}
# Recomended retail Price
p1 <- device_data %>%
  ggplot(aes(x = released_yr, y = recommended_retail_price, color = line, shape = brand)) +
  geom_point(size = 2) +
  scale_color_brewer(palette="Set3") +
  labs(title = "Released Year v.s. Price by each Line",
       x = "Released Year",
       y = "Price") +
  theme(text = element_text(size = 15))+
  theme_minimal() + theme(text = element_text(size = 6))
```

```{r eval=FALSE, include=FALSE}
# # Calculate the mean price for each company
# mingar <-  device_data %>%
#               na.omit() %>%
#               filter(brand == "Mingar") %>%
#               summarise(mean=mean())
# mean(mingar$recommended_retail_price)
# bitfit <-  device_data %>%
#               na.omit() %>%
#               filter(brand == "Bitfit") %>%
#               select(recommended_retail_price)
# mean(bitfit$recommended_retail_price)
```

```{r echo=FALSE}
# device_data %>% 
#   ggplot(aes(y = released_yr, color = line, fill = line)) +
#   geom_bar(stat="count") +
#   scale_color_brewer(palette="Set3") +
#   scale_fill_brewer(palette="Set3") +
#   labs(title = "Number of realesed products vs Released Year", 
#        y = "Released Year",
#        x = "Number of Reealsed products",
#        caption = "Created by Mango in 2022") +
#   theme_minimal()
```

```{r fig.cap="Number of realesed products vs Batttery Life", echo=FALSE}
# Batterty Lives
p2 <- device_data %>% 
  ggplot(aes(y = battery_life, color = line, fill = line)) +
  geom_bar(stat="count") +
  scale_color_brewer(palette="Set3") +
  scale_fill_brewer(palette="Set3") +
  labs(title = "Num of Devices with each Battery Life Type for each Line",
       x = "Count",
       y = "Battery Life") +
  theme_minimal() + theme(text = element_text(size = 6))
```

```{r}
# Waterproof
p3<-device_data %>% 
  ggplot(aes(y = water_resitance, color = line, fill = line)) +
  geom_bar(stat="count") +
  scale_color_brewer(palette="Set3") +
  scale_fill_brewer(palette="Set3") +
  labs(title = "Num of Devices with each Waterproof Type for each Line",
       x = "Count",
       y = "Waterproof") +
  theme_minimal() + theme(text = element_text(size = 6))
```

```{r}
# Sales for each line
p4<-device_cust %>% 
  ggplot(aes(y=line, fill = line))+
  geom_bar() + scale_fill_brewer(palette="Set3") +
  labs(title = "Number of Sales for each Line",
       x = "Sales",
       y = "Line") + theme_minimal() + theme(text = element_text(size = 6))
```

```{r echo=FALSE, include=TRUE}
# A summary graph
ggarrange(p1, p2, p3, p4,
          labels = c("A", "B", "C", "D"),
          common.legend = TRUE, 
          legend = "bottom",
          ncol = 2, nrow = 2)
```

**Plot A** above is a scatter plot showing the recommended retail price, released year and the lines. According to the plot, the line *Run* has the highest price in the range of \$300 - \$500, while line *Advanced* and *Active* has a much lower price from \$50 to \$150. The average price of all lines in *Mingar* is \$284.66. And the average price of all lines in *Bitfit* is \$180.90. By the plot A, the released year for the line *Run* is spread through the x-axis, while the line *Advanced* and *Active* only came out in the most recent 3 years.

**Plot B** is a bar chart showing the battery life for each line. Based on the plot, we noticed that line *Run* usually has the longest battery life, since most of the devices of *Run* has a battery life up to 14 days and more. However, the battery life of line *Advanced* and *Active* is shorter, which is about 5-14 days.

**Plot C** is a also a bar chart showing the performance of waterproof. Line *Run* has a better waterproof performance, all devices from *Run* has a waterproof of 5ATM-10ATM, while devices from line *Advanced* and *Active* are only water resistant, which is the lowest level of waterproof.

**Plot D** shows the popularity of each line in *Mingar*. From the bar chart, we can conclude that the line *Run* and *Advanced* are the two most popular line in *Mingar.* And the sales of *Run* is slightly greater than *Advanced.*

### Conclusions

Above all, we noticed that the line *Run* and *Advanced* are the most popular lines at *Mingar.* Line *Run* has an overall better performance and a higher price among all other lines. Run is one of the earliest lines the company started producing, thus, line *Run* has 9 devices, which is the line having most products. Line *Active* and *Advanced* are two new lines that came out in the most recent 3 years. There are only 5 devices for the line *Advanced* and *Active.* However, the total sales of line *Advanced* and *Active* is more than that of line *Run.* The result implies that when the devices with sufficient functionality, price is the major factor for number of sales.

## Discussion

Findings from research question 1 suggest that buyers of MINGAR’s newer affordable lines “Active” and “Advance” tend to come from a lower-income region, therefore meeting the marketing goal of attracting customers outside of the traditionally higher-income base. Further, customers across all four product lines do not have the same median age. Specifically, the “Active” line appeals most to users in two distinctive age groups: mid-20s and 60s. Moreover, Ontario tops the customer base across all lines, followed by Alberta and Quebec in the two new lines. Therefore, we suggest MINGAR to continue expanding its marketing efforts in these provinces.

Results from research question 2 indicate that MINGAR’s devices are significantly less accurate at tracking sleep scores of dark skin emoji-modifiers than those of light skin emoji-modifiers, implying that the devices may have great potential to perform more poorly on dark skin individuals. In anticipation of future complaints, we suggest MINGAR prepare contingency plans, such as creating a Frequently Asked Questions page to assure users that this is a known technical challenge MINGAR is actively working to resolve. 

Lastly, from research question 3, we observe “Run” and “Advanced'' to be the most popular lines among users of MINGAR. However, despite the recent launch of “Active” and “Advance”, their combined sales have exceeded the sales of “Run”, the traditional high-end line with most features. These results imply that customers tend to favour approachable price points over functionality when choosing a device. 

### Strengths and limitations

At MANGO, one of our greatest strengths is that we take ethical data practices extremely seriously. In particular, we have a track record of handling identity-based data with sensitivity, integrity, and tact, which is demonstrated in all our past and current collaboration projects and also consistent with MINGAR’s values. 

However, there are several limitations in our analysis. The first limitation is that the Kruskal Wallis Test, used in the first research question to identify age distributions among different product lines, does not meet the model assumption of same shape distributions, as the age distribution of the “Active” line resembles a binomial distribution, while the remaining three product lines appear relatively normal. We can potentially attribute this violation to the lack of available data collected on the “Active” line.

Another important caveat for interpreting our study is that emoji-modifiers were used as a proxy for ethnicity due to lack of data. MANGO suggests MINGAR to introduce a personalized cartoon avatar profile feature, similar to Apple’s Memoji feature, where users can choose to create realistic avatar profiles that look like themselves. This avatar feature will likely be a more powerful proxy for race and ethnicity than the current skin tone emoji-modifier. 

A final limitation is that the postal codes extracted from PCCF are dated (2016). Plus, they represent mailing addresses, not necessarily residential addresses of customers, and therefore may not be accurate when being used as a proxy to infer the income levels of customers. 

\newpage

# Consultant information

## Consultant profiles

**Xinyi Chen**. Xinyi is a senior data scientist with MANGO. She specializes in data modeling. Xinyi earned her Bachelor of Science, Specialist in Computer Science from the University of Toronto in 2020. 

**Rui Miao**. Rui is a senior data engineer with MANGO. She specializes in data wrangling. Rui earned her Bachelor of Science, Majoring in Computer Science from the University of Toronto in 2021. 

**Xinpang Shan**. Xinpang is a junior consultant with MANGO. She specializes in reproducible analysis. Xinpang earned her Bachelor of Science, Specialist in Data Science from the University of Toronto in 2021. 

**Iris Shao**. Iris is an associate consultant intern with MANGO. She specializes in statistical communication. Iris earned her Bachelor of Science, Majoring in Statistics and Minoring in Digital Humanities from the University of Toronto in 2022. 

## Code of ethical conduct

- MANGO strictly adheres to privacy laws or regulations surrounding the collection, storage, and reporting of data and results.

- MANGO maintains the highest standards of ethical statistical practice in satisfying the requirements of the client and disclosing any potential conflict of interest in a timely manner.  

- MANGO strives to refrain from procedural bias and any misrepresentation of findings.

\newpage

# References

*You don't need to cite course materials, but consider all the the places you got data from, as well as the packages used and R itself. These are all things you should consider citing. Likewise, you might use some external resources on the emoji skin tones/Fitzpatrick scale, etc.*

\newpage

# Appendix

*These appendices should outline in more detail the steps taken to access the following datasets. They should NOT include code, but should briefly describe the steps and important considerations. I.e., show that you understand what needs to be considered when web scraping, protecting licensed data, etc.*

## Web scraping industry data on fitness tracker devices
We have respected the web scraping policies by providing our contact information to the web scraping agent. We have also respected crawl limit of 12 seconds. We have not used the scraped data in a way that reveals user privacy information. 

## Accessing Census data on median household income

### API access

We used APIs to get the data from the Canadian census website. We signed up for the cancensus API through the website and get the API key for our account, and used the API key to fetch the income data.

### Ethical Professional consideration

Based on the policy on the website, data on CensusMapper can be freely linked or downloaded through the provided interface. And we are allowed to explore census variables ans data for specific geographic. In our research, we respects the policy posted on the website, we used the data to reproduce new dataset, and analyze our research questions based on the data.

## Accessing postcode conversion files
We chose to download the census data from August,2021. We want the most recent postcode data from the Census since we want the most up to date information about where people are living.

**Final advice: KNIT EARLY AND OFTEN!**
